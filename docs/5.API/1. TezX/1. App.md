
# âœ… `TezX` - Application Initialization

`TezX` is a high-performance, middleware-based server and router framework designed for **Deno**, **Bun**, and **Node.js** environments. It offers first-class support for route handling, request lifecycle hooks, and elegant middleware chaining â€” built for speed and flexibility.

---

## ðŸš€ Quick Start: `server.ts`

```ts
// server.ts
import { loadEnv } from "tezx/deno";
import { TezX } from "tezx/core";
import { CustomRouter } from "./router.ts"; // your custom route tree
import { logger } from "tezx/logger";

// Optional: Load environment variables
await loadEnv();

const app = new TezX({
  routeRegistry: new CustomRouter(),   // ðŸš¦ Route tree definition
  debugMode: true,                     // ðŸž Enables detailed debugging logs
  onPathResolve: (path) => path.replace(/\/+$/, "").toLowerCase(), // Optional
});

// ðŸ”Œ Register global middleware (optional)
app.use(logger);

// ðŸŒ Start TezX on Deno
Deno.serve({ port: 5000 }, app.serve);
```

---

## ðŸ“¦ Folder Structure Example

```bash
project/
â”œâ”€â”€ middlewares/
â”‚   â””â”€â”€ logger.ts
â”œâ”€â”€ router.ts
â”œâ”€â”€ server.ts
â”œâ”€â”€ .env
â””â”€â”€ src/
    â””â”€â”€ handlers/
        â””â”€â”€ home.ts
```

---

## âš™ï¸ `TezXConfig` Options

| Option          | Type                       | Description                                                           |
| --------------- | -------------------------- | --------------------------------------------------------------------- |
| `routeRegistry` | `Router`                   | Custom route registry implementing `Router` interface                 |
| `debugMode`     | `boolean`                  | Enable middleware-level debug logging                                 |
| `onPathResolve` | `(path: string) => string` | Hook to normalize paths (e.g., trim trailing slashes, lowercase URLs) |
| `basePath`      | `string`                   | Optional base path for all routes (defaults to `/`)                   |
| `env`           | `Record<string, any>`      | Custom environment object passed into each context                    |

---

## ðŸ›¡ Global Middleware Support

`TezX` allows chaining global middleware using the `.use()` method (inherited from `Router`). Each middleware gets access to the context and `next()` function.

```ts
import { Middleware } from "tezx/types";

export const loggerMiddleware: Middleware = async (ctx, next) => {
  console.log(`[${ctx.method}] ${ctx.pathname}`);
  await next();
};
```

### Registering Global Middleware

```ts
app.use(loggerMiddleware);
```

---

## âž• Route-Level Middleware (All Methods)

If you define a middleware-only route (without `.get()`, `.post()` etc.), `TezX` treats it as an `ALL` method handler â€” perfect for interceptors, guards, or prefix-based matching:

```ts
app.addRoute({
  method: "ALL", // Intercepts all methods (GET, POST, etc.)
  path: "/admin/:section",
  handler: adminAuthMiddleware,
});
```

---

## âŒ Custom 404 Handler

```ts
app.notFound((ctx) => ctx.status(404).text("ðŸ” Not Found"));
```

---

## ðŸ›  Custom Error Handler

```ts
app.onError((err, ctx) => {
  console.error("Unhandled error:", err.message);
  return ctx.status(500).text("ðŸ”¥ Internal Server Error");
});
```

---

## ðŸ“¦ Environment Variables (`.env`)

```bash
PORT=5000
APP_NAME=TezXApp
```

```ts
// Access anywhere
const port = Deno.env.get("PORT");
```

---

## ðŸ§ª Running the Server

```bash
deno run --allow-net --allow-read --allow-env server.ts
```

or with live reload:

```bash
deno run --watch --allow-all server.ts
```

---

## ðŸ§¬ Runtime Compatibility

| Feature    | Deno       | Bun        | Node.js   |
| ---------- | ---------- | ---------- | --------- |
| `.serve()` | âœ… Native   | âœ… Native   | âœ… Adapter |
| Middleware | âœ… Yes      | âœ… Yes      | âœ… Yes     |
| WebSocket  | âœ… Built-in | âœ… Built-in | âž– Custom  |

---

## ðŸ’¡ Summary

| Feature      | Description                                       |
| ------------ | ------------------------------------------------- |
| `TezX`       | Main app handler & runtime-agnostic router        |
| `use()`      | Register global middleware                        |
| `addRoute()` | Register routes dynamically, including ALL method |
| `notFound()` | Custom 404 handler                                |
| `onError()`  | Global error handler                              |
| `serve()`    | Entry point for Deno/Bun/Node servers             |

---
